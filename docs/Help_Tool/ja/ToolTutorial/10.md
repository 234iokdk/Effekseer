% No10.リボンと軌跡

<div class="main">

## 概要

本章では、リボンと軌跡について説明します。
リボンと軌跡は、細長い形状のパーティクルです。
スプライトでは表現できないエフェクトの余韻などを表現できます。

<div align="center">
<img src="../../img/Tutorial/10_ribbon_track.gif">
<p>リボンと軌跡</p>
</div>

リボンと軌跡の主な違いはパーティクルの向きです。
リボンはパーティクルの角度に影響されますが、軌跡は常にカメラ方向を向きます。

<div align="center">
<table>
<tr>

<td>
<div align="center">
<img src="../../img/Tutorial/07_effect1.gif">
<p>本章で作成するエフェクト1</p>
</div>
</td>
<td>
<div align="center">
<img src="../../img/Tutorial/07_effect2.gif">
<p>本章で作成するエフェクト2</p>
</div>
</td>

</tr>
</table>
</div>

あらかじめ作成途中のエフェクトを下記のリンクからダウンロードできるようにしました。

<div align="center">
<a href = "../../Sample/09_01_Sample.zip">ダウンロード</a>
</div>

## 使い方

リボンと軌跡は、同じ親から生成されたパーティクル間を繋げます。
繋げることで、細長い形状を表現しています。

図

通常のスプライトはパーティクルは個々に独立していますが、

パーティクル間に距離があれば、リボンと軌跡を使用できますが、
効果的に使用するには親子関係や生成方法と組み合わせる必要があります。


### 親子関係

親のパーティクルは移動するように設定します。
親のパーティクルから一定時間ごとに子のパーティクルが生成されるようにします。
子のパーティクルは生成された位置に残るようにします。

そうすると、親のパーティクルに沿って、帯状のパーティクルが生成されるようになります。

図

実際に試してみましょう。

親のノードのパラメーターは以下のようになります。

xxx

子のノードのパラメーターは以下のようになります。

xxx

重要なのは、位置、角度、拡大の影響が生成時のみになっていることです。
生成時のみを指定すると、パーティクルが生成された時の親のパラメーターのみの影響を受けます。

子のパーティクルは親のパーティクルの軌跡にそって配置されます。

図


ダウンロード

### 生成方法

生成方法を使用すると親子関係を使用しなくても綺麗な軌跡やリボンのパーティクルを生成できます。
生成方法では、順番に規則的にパーティクルを配置できるため、生成方法で指定した順に軌跡やリボンが生成されます。

実際に試してみましょう。

ノードのパラメーターは以下のようになります。

xxx

図

生成方法で指定した配置順に沿って軌跡が生成されることがわかります。

## 軌跡とリボンの違いについて

リボンと軌跡の違いを確認するために、同じパラメーターでリボンと軌跡を変更します。

図

リボンはパーティクルの回転の影響を受けるため、向きが傾いていることがわかります。

基本的には軌跡の方が便利ですが、剣の軌跡のような回転を要求する場合にリボンを使用します。

## 作例1 螺旋

帯が螺旋状に移動するエフェクトです。

まず、回転しながら上に移動する親のノードを作成します。
速度を使用してもいいですし、イージングを使用してもいいです。

作例では、位置に速度0.1、回転に回転速度2を指定しました。

図

次に、軌跡の子のノードを追加します。
子ノードを追加します。
親と同じ位置にいると回転がわからないので、位置を(2,0,0)に指定します。

1つのパーティクルでは軌跡は使用できないので、生成数を300にします。

生成されたら、生成された位置にとどまりたいので生成時のみに変更します。

再生すると、螺旋状になっていることがわかります。

図

これでは見栄えが悪いので画像や色を設定します。
設定方法はスプライトとほとんど同じです。

自分の好きなように調節してみましょう。

画像や色を設定して、飾りのスプライトを追加しました。
今回、私が作成したエフェクトは最後にダウンロードできます。

図

## 作例2 剣

軌跡では表現できないエフェクトとして、武器の軌跡を表すようなエフェクトがあります。
剣が通過した位置にエフェクトを生成します。

リボンを使用してこのエフェクトを作成します。

まず、回転する親のノードを作成します。
剣を振るのは一瞬なので、生存時間は30、回転はイージングで角度０から角度180になるように設定します。

次に子のノードを作成します。

先ほどと同じように、生成時のみに変更します。
リボンに設定します。
位置は（2,0,0）で生成数は３０にします。

図

先ほどと同じく、画像や色を設定します。

自分の好きなように調節してみましょう。

画像や色を設定して、飾りのスプライトを追加しました。
今回、私が作成したエフェクトは最後にダウンロードできます。

図


最後に、本章で作成されたエフェクトをダウンロードできるようにしてみました。

<div align="center">
<a href = "../../Sample/09_02_Sample.zip">ダウンロード</a>
</div>

## まとめ

本章では、実際にゲームで使用できそうなエフェクトを作成しました。 
次章では、エフェクトを作成する上での細かいテクニックを説明します。

</div>